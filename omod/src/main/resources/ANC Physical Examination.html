<htmlform> 
<translations defaultLocale="en">
    <!--New-->
    <code name="anemia">
        <variant locale="en" value="Anemia"/>
        <variant locale="fr" value="anèmie"/>
    </code>
    <code name="oedema">
        <variant locale="en" value="Oedema"/>
        <variant locale="fr" value="Oedème"/>
    </code>
    <code name="albumin">
        <variant locale="en" value="Urinary Albumin"/>
        <variant locale="fr" value="Albumin urinaire"/>
    </code>
    <code name="bleeding">
        <variant locale="en" value="Bleeding"/>
        <variant locale="fr" value="Saignement"/>
    </code>
    <code name="Was the woman given iron and folic acid?">
        <variant locale="en" value="Was the woman given iron and folic acid?"/>
        <variant locale="fr" value="Est-ce que la femme a pris du fer et de l'acide folique?"/>
    </code>
    <code name="Sulfadoxine">
        <variant locale="en" value="Was the woman Given Pyrimethamine Sulfadoxine (starting at 4th month)?"/>
        <variant locale="fr" value="Pris de la Sulfadoxine-pyriméthamine"/>
    </code>
    <code name="Was the woman Given Mebendazole?">
        <variant locale="en" value="Was the woman Given Mebendazole?"/>
        <variant locale="fr" value="Pris du Mébendazole"/>
    </code>
    <code name="Was the woman given a mosquito net?">
        <variant locale="en" value="Was the woman given a mosquito net?"/>
        <variant locale="fr" value="Reçu des Moustiquaires"/>
    </code>
    <code name="Was the woman Given a Tetanus Vaccine?">
        <variant locale="en" value="Was the woman Given a Tetanus Vaccine?"/>
        <variant locale="fr" value="Reçu le vaccin contre le tétanos"/>
    </code>
    <code name="Yes">
        <variant locale="en" value="Yes"/>
        <variant locale="fr" value="Oui"/>
    </code>
    <code name="No">
        <variant locale="en" value="No"/>
        <variant locale="fr" value="Non"/>
    </code>
    <code name="Not Sure">
        <variant locale="en" value="Not Sure"/>
        <variant locale="fr" value="Pas Sûr"/>
    </code>
    <!---->
    <code name="Hospital">
        <variant locale="en" value="Hospital"/>
        <variant locale="fr" value="Hôpital"/>
    </code>
    <code name="Health Center">
        <variant locale="en" value="Health Center"/>
        <variant locale="fr" value="Centre de Santé"/>
    </code>
    <code name="assessed by doctor">
        <variant locale="en" value="Woman needs to be assessed by doctor"/>
        <variant locale="fr" value="Le patient doit consulter un médecin"/>
    </code>
    <code name="give_birth">
        <variant locale="en" value="Woman should give birth in"/>
        <variant locale="fr" value="La mère devra accoucher à l' /au"/>
    </code>
    <code name="presentation">
        <variant locale="en" value="Presentation (how is the child positioned in the womb)"/>
        <variant locale="fr" value="Présentation - Comment l'enfant est positionné dans l’utérus"/>
    </code>
    <code name="breech">
        <variant locale="en" value="Breech Presentation"/>
        <variant locale="fr" value="Présentation en siège"/>
    </code>
    <code name="cephalic">
        <variant locale="en" value="Cephalic"/>
        <variant locale="fr" value="Céphalique"/>
    </code>
    <code name="Yes">
        <variant locale="en" value="Yes"/>
        <variant locale="fr" value="Oui"/>
    </code>
    <code name="No">
        <variant locale="en" value="No"/>
        <variant locale="fr" value="Non"/>
    </code>
    <code name="Weight">
        <variant locale="en" value="Weight"/>
        <variant locale="fr" value="Poids"/>
    </code>
    <code name="Weight Change Since Last Encounter">
        <variant locale="en" value="Weight Change Since Last Encounter"/>
        <variant locale="fr" value="changement de poids"/>
    </code>
    <code name="Temperature">
        <variant locale="en" value="Temperature"/>
        <variant locale="fr" value="Température"/>
    </code>
    <code name="Systolic">
        <variant locale="en" value="Systolic BP"/>
        <variant locale="fr" value="pression artérielle systolique"/>
    </code>
    <code name="Diastolic">
        <variant locale="en" value="Diastolic BP"/>
        <variant locale="fr" value="pression artérielle diastolique"/>
    </code>
    <code name="Gestation">
        <variant locale="en" value="Number of weeks pregnant"/>
        <variant locale="fr" value="Nombre de semaine de grossesse"/>
    </code>
    <code name="fundal">
        <variant locale="en" value="Length of the uterus (fundal height)"/>
        <variant locale="fr" value="Taille de l'utérus (hauteur utérine)"/>
    </code>
    <code name="heartrate">
        <variant locale="en" value="Heart Rate of Fetus"/>
        <variant locale="fr" value="Rythme cardiaque foetal"/>
    </code>
    <code name="baby_moving">
        <variant locale="en" value="Is Baby Moving"/>
        <variant locale="fr" value="Is Baby Moving"/>
    </code>
    <code name="fundal_check">
        <variant locale="en" value="Does Fundal Height Match gestational age"/>
        <variant locale="fr" value="Does Fundal Height Match gestational age"/>
    </code>
</translations>
<script type="text/javascript">
if(jQuery){
    $j(document).ready(function(){
        if ( $j.browser.msie ) {
            $j(":checkbox").click(function(){
               $j(this).change();
           });
        }
        $j(".enableDisable").each(function(){
           var group = $j(this);
           function disableFn(){
               group.children("#disabled").fadeTo(250,0.33);
     group.children("#disabled").find(":checkbox").attr("checked",false); //uncheck
     group.children("#disabled").find("input[type$='text']").val("");
     group.children("#disabled").find("input").attr("disabled",true);  //disable
 }
 function enableFn(){
   group.children("#disabled").fadeTo(250,1);
   group.children("#disabled").find("input").attr("disabled",false);
}
disableFn();
$j(this).children("#trigger").find(":checkbox:first").change(function(){
   var checked = $j(this).attr("checked");
   if(checked == true){
      enableFn();
  }else{
   disableFn();
}
});
});


        $j(".checkboxGroup").each(function(){
           var group = $j(this);
           var uncheckAll = function(){
               group.find("input[type$='checkbox']").attr("checked",false);
               group.find("input[type$='checkbox']").change();
           }
           var uncheckRadioAndAll = function(){
               group.find("#checkboxAll,#checkboxRadio").find("input[type$='checkbox']").attr("checked",false);
               group.find("#checkboxAll,#checkboxRadio").find("input[type$='checkbox']").change();
           }



           group.find("#checkboxAll").find("input").click(

            function(){
               var flip;
               var checked = $j(this).siblings(":checkbox:first").attr("checked");
               if($j(this).attr("name") == $j(this).parents("#checkboxAll:first").find(":checkbox:first").attr("name")){
                   checked = $j(this).attr("checked");
                   flip = checked;
               }else{
                   flip = !checked;
               }
     if($j(this).attr("type") == "text") if(flip == false) flip = !filp; // this is so the user doesn't go to check the checkbox, then uncheck it when they hit the input.
     uncheckAll();
     $j(this).parents("#checkboxAll:first").find(":checkbox").attr("checked",flip);
     $j(this).parents("#checkboxAll:first").find(":checkbox").change();
 }
 );



           group.find("#checkboxRadio").find("input[type$='checkbox']").click(function(){
               uncheckAll();
               $j(this).siblings("input[type$='checkbox']").attr("checked",false);
               $j(this).attr("checked",true);
               $j(this).change();
           });

           group.find("#checkboxCheckbox").click(
               function(){
                   uncheckRadioAndAll();
               }
               );
       });
});
}
</script> <script type="text/javascript">

var $ = jQuery.noConflict();
$(document).ready(function() {
    var cdate = $("#encounterDate input").val();
    
    var dlmp = $("#lmplkp").text();
    
    
    var crd = new Date(swapDate(cdate));
    
     var fix = fixDate(dlmp);
     
     var dd = new Date(fix);
     
     var ddiff = new Date(crd - dd);
     
     var days = ddiff/1000/60/60/24;
     //alert(days);
     if(!isNaN(days)){
       var gest = (days/7).toFixed(1);
       $("#weeks input").val(Math.round(gest));
     //alert(d);
 }
 $("#weight").change(function() {
   var lastWeight = $("#lkp").text();
   //alert(lastWeight);
    // alert(!isNaN(lastWeight));
     //alert(lastWeight == 0)
     if(lastWeight != 0){
   //alert(lastWeight);
   var lWD = $("#dtlkp").text();
         alert(lWD);
         var lastWeightDate = fixDate(lWD);
        // alert(lastWeightDate);
        var currentDate= $("#encounterDate input").val();
        var d = new Date(lastWeightDate);
        var currentWeight= $("#weight input").val();
        var d2 = new Date(swapDate(currentDate));

        var weightDiff = currentWeight - lastWeight;
            //if(!isNaN(weightDiff)){

              var diff = new Date(d2 - d);
              if(diff &gt; 1){
               var days = diff/1000/60/60/24;
               var month = days/30;
               var change= weightDiff/month;
               var result = change.toFixed(2)
               $("#weightChange input").val(result);
           }
            //}
        }
    });
 
 $("#heartRate").change(function() {
    var val = $("#heartRate input").val();

    if(val == null || val == '')
    {
                        // $('#fhrOK input:nth(0)').attr('checked',false);
                         //$('#fhrOK input:nth(1)').attr('checked',false);
                         $('#warning').hide();
                     }

                     else if(val &lt; 120 || val &gt; 160) {

                    //$('#fhrOK input:nth(1)').attr('checked',true);
                    $('#warning').show();		
                } else {

                    //$('#fhrOK input:nth(0)').attr('checked',true);
                    $('#warning').hide();
                }


            });
 $("#fundalHeight,#weeks ").change(function() {
    var fh = $("#fundalHeight input").val();
    var wk = $("#weeks input").val();
                    //alert(fh+" ... "+wk);

                    if(fh == null || fh == ''||wk==null||wk=='')
                    {
                        $('#fundal_height_check input:nth(0)').attr('checked',false);
                        $('#fundal_height_check input:nth(1)').attr('checked',false);


                    }

                    else if(fh==wk)
                    { 

                       $('#fundal_height_check input:nth(0)').attr('checked',true);

                   }

                   else{
                       $('#fundal_height_check input:nth(1)').attr('checked',true);

                   }

               });
 $("#sbp").change(function() {

    var sys = $("#sbp input").val();
    var dys = $("#dbp input").val();
           // alert( val);
            var group = $j("#checkboxCheckbox.bp");
            
            if(sys &gt; 140 || dys &gt; 90 )
            {
               //alert("txt = "+ val);
               group.find("input[type$='checkbox']").attr("checked",true);
               var gr = $j("#checkboxAll");
               gr.find("input[type$='checkbox']").attr("checked",false);	   
           }

           else {

              group.find("input[type$='checkbox']").attr("checked",false);	
          }

          /*if(dys &gt; sys)
            document.getElementById('warning').style.display = 'inline';
          else
          	document.getElementById('warning').style.display = 'none';*/

      });
 $("#dbp").change(function() {
       // alert("txt");
       var val = $("#dbp input").val();
       var v1 = $("#sbp input").val();
            //alert( val);
            var group = $j("#checkboxCheckbox.bp");
            if(val &gt; 90 || v1 &gt; 140)
            {
                group.find("input[type$='checkbox']").attr("checked",true);
                var gr = $j("#checkboxAll");
                gr.find("input[type$='checkbox']").attr("checked",false);	 	   
            }

            else {
             group.find("input[type$='checkbox']").attr("checked",false);	
         }

        /*  if(val &gt; v1)
            document.getElementById('warning').style.display = 'inline';
          else
          document.getElementById('warning').style.display = 'none';*/



     });
 $("#muac").change(function() {
    var mc = $("#muac input").val();
     //alert(mc);

     if(mc &lt; 21)
     { 

       $('#muac_check input:nth(0)').attr('checked',true);

    }

   else{
       $('#muac_check input:nth(1)').attr('checked',true);

   }

});
});
function fixDate(dateString){

    var Flag2 = dateString.indexOf("févr.");
    var Flag4 = dateString.indexOf("avr.");
    var Flag5 = dateString.indexOf("mai");
    var Flag6 = dateString.indexOf("juin");
    var Flag7 = dateString.indexOf("juil.");
    var Flag8 = dateString.indexOf("août");
    var Flag12 = dateString.indexOf("déc.");
     //alert("Flag is "+frFlag);
     
     if(Flag7 != -1){
       dateString = dateString.replace("juil.","Jul");
   }
   if(Flag6 != -1){
       dateString = dateString.replace("juin","Jun");
   }
   if(Flag4 != -1){
       dateString = dateString.replace("avr.","Apr");
   }
   if(Flag5 != -1){
       dateString = dateString.replace("mai","May");
   }
   if(Flag8 != -1){
       dateString = dateString.replace("août","Aug");
   }
   if(Flag2 != -1){
       dateString = dateString.replace("févr.","Feb");
   }
   if(Flag12 != -1){
       dateString = dateString.replace("déc.","Dec");
   }

   return dateString;
}
function swapDate(dateString){
    //alert(dateString);
   var flag = dateString.substring(3,5)
    
    //alert(flag); 

    
    
   if(flag == "01"){
       dateString = dateString.replace("/01/","/Jan/");
   }
   if(flag == "02"){
       dateString = dateString.replace("/02/","/Feb/");
   }
   if(flag == "03"){
       dateString = dateString.replace("/03/","/Mar/");
   }
   if(flag == "04"){
       dateString = dateString.replace("/04/","/Apr/");
   }
   if(flag == "05"){
       dateString = dateString.replace("/05/","/May/");
   }
   if(flag == "06"){
       dateString = dateString.replace("/06/","/Jun/");
   }
   if(flag == "07"){
      dateString = dateString.replace("/07/","/Jul/");
    }
   if(flag == "08"){
       dateString = dateString.replace("/08/","/Aug/");
   }
   if(flag == "09"){
       dateString = dateString.replace("/09/","/Sep/");
   }
   if(flag == "10"){
       dateString = dateString.replace("/10/","/Oct/");
   }
   if(flag == "11"){
       dateString = dateString.replace("/11/","/Nov/");
   }
   if(flag == "12"){
       dateString = dateString.replace("/12/","/Dec/");
   }

   return dateString;
}

</script> 
<script type="text/javascript">       
var $ = jQuery.noConflict();
$j(document).ready(function(){
//$("#location select").attr("disabled",true); 
// $("#provider select").attr("disabled",true); 

});
</script>
<macros>
   paperFormId = (Fill this in) 
   headerColor =#009d8e
   fontOnHeaderColor = white 
</macros>

<style>
table.risks td {
   font-size: 0.9em;
}

.section {
   border: 1px solid$headerColor;
   padding: 2px;
   text-align: left;
   margin-bottom: 1em;
}

.sectionHeader {
   background-color: $headerColor;
   color: $fontOnHeaderColor;
   display: block;
   padding: 2px;
   font-weight: bold;
}

table.baseline-aligned td {
   vertical-align: center;
}
</style>

<span style="float: right">Paper Form ID: $paperFormId</span>
<h2>ANC Physical Examination (v1.0)</h2>
<includeIf velocityTest="$patient.gender == 'F' ">
    <section headerLabel="1. Encounter Details">
       <table class="baseline-aligned">
          <tr>
             <td>Date:</td>
             <td><encounterDate default="today" id="encounterDate" /></td>
         </tr>
         <tr>
            <td>Location:</td>
            <td><encounterLocation id="location" default="GlobalProperty:registration.defaultLocationCode"/></td>
        </tr>
        <tr>
            <td>Provider:</td>
            <td><encounterProvider id="provider" /></td>
        </tr>
    </table>
</section>
<section>
    <section
    headerLabel="2. Physical Exams">
    <table class="baseline-aligned">

     <tr>

      <td><obs conceptId="5089" id="weight" labelCode="Weight"/>(KG)</td>
  </tr>
  <tr style="display: none;">
      <td><span id="lkp"><lookup
          expression="fn.latestObs(5089).getValueAsString(en)" /></span></td>
      </tr>
      <tr style="display: none;">
         <td><span id="dtlkp"> <lookup
          expression="fn.latestObs(5089).obsDatetime" />
      </span></td>
  </tr>
  <tr>

     <td><obs conceptId="8511" id="weightChange" labelCode="Weight Change Since Last Encounter"/>(Per/Month)</td>

 </tr>
    <!--<tr><td><lookup  expression="patient.personName"/></td></tr>
    <tr><td><lookup expression="fn.latestObs(5089)" id="lkp"/></td></tr>-->
    <tr>

     <td><obs conceptId="5088" labelCode="Temperature"/>(&#176;C)</td>
 </tr>
 <tr>

     <td><obs conceptId="5085" labelCode="Systolic" id="sbp"/>/ <obs
       conceptId="5086" labelCode="Diastolic" id="dbp"/>(mmHg)</td><!--<span class="error" id="warning" style="display: none;">Diastolic Blood pressure cannot exceed Systolic blood pressure</span>-->
   </tr>
   <tr style="display: none;">
     <td><span id="lmplkp"> <lookup
      expression="fn.latestObs(968).getValueDatetime()" />
  </span></td>
</tr>
<tr>

 <td><obs conceptId="1279" id="weeks" labelCode="Gestation"/></td>
</tr>

<tr>

 <td><obs conceptId="8145" id="fundalHeight" labelCode="fundal"/>(CM) </td>
</tr>

    <!--<tr>
        <td>Does fundal height correlate to Gestational age?:</td>
        <td><obs conceptId="8512" id="fhCheck" style="radio"
                answerConceptIds="1065,1066" answerLabels="Yes,No" /></td>
            </tr>-->
            <tr>
             <td><obs conceptId="9619" id="fundal_height_check" style="radio"
               answerConceptIds="1065,1066" answerCodes="Yes,No" labelCode="fundal_check"/></td>
           </tr>
           <tr>

               <td><obs conceptId="8146" id="heartRate" labelCode="heartrate"/></td>

           </tr>
           <tr>

               <td><obs conceptId="9620"  labelCode="baby_moving" answerConceptIds="1065,1066" answerCodes="Yes,No" style="radio"/></td>

           </tr>
           <tr>

               <td><obs conceptId="1290"  labelCode="MUAC" id="muac"/>(CM)</td>

           </tr>
           <tr>

               <td><obs conceptId="10972"  labelCode="MUAC &lt; 21" answerConceptIds="1065,1066" answerCodes="Yes,No" style="radio" id="muac_check"/></td>

           </tr>
    <!--<tr>
        <td>is fetal heart rate between 120 and 160 BPM?:</td>
        <td><obs conceptId="8513" style="radio" id="fhrOK"
                answerConceptIds="1065,1066" answerLabels="Yes,No" /></td>
            </tr>-->




        </table>


    </section>
    <section
    headerLabel="ANC complications/Complications de la CPN">

    <table class="baseline-aligned checkboxGroup risks">
      <tr>
         <td id="checkboxAll"><obs conceptId="8156"
           answerConceptId="8155" style="checkbox" /></td>
       </tr>

       <tr>
         <td id="checkboxCheckbox"><obs conceptId="8156"
           answerConceptId="3"  style="checkbox" answerCode="anemia"/></td>
           <td id="checkboxCheckbox"><obs conceptId="8156"
               answerConceptId="460"  style="checkbox" answerCode="oedema"/></td>
               <td id="checkboxCheckbox"><obs conceptId="8156"
                   answerConceptId="8150"  style="checkbox" answerCode="bleeding"/></td>
               </tr>

               <tr>
                 <td id="checkboxCheckbox" class="bp"><obs conceptId="8156"
                   answerConceptId="8152" style="checkbox" /></td>
                   <td id="checkboxCheckbox"><obs conceptId="8156"
                       answerConceptId="8151" style="checkbox" /></td>
                       <td id="checkboxCheckbox" style="font-size: 0.9em;"><obs
                           conceptId="8156" answerConceptId="8153" style="checkbox" /></td>
                       </tr>
                       <tr>
                         <td id="checkboxCheckbox"><obs conceptId="8156"
                           answerConceptId="849" answerCode="albumin" 
                           style="checkbox" /></td>
                           <td id="checkboxCheckbox"><obs conceptId="8156"
                               answerConceptId="8154" style="checkbox"
                               /></td>
                           </tr>

                       </table>

                   </section>

                

                                <section
                                headerLabel="Nine Month ANC (Filled For Final ANC Visit Only) ">
                                <table class="baseline-aligned">
    <!--<tr>
        <td>Presentation (how is the child positioned in the womb):</td>
        <td><obs conceptId="8149" style="radio"
                answerConceptIds="8147,1172,8148"
                answerLabels="cephalic,Breech Delivery,Abnormal Lie" /></td>
            </tr>-->
            <tr>

                <td><obs conceptId="8149" answerConceptIds="8147,8539,8148"
                    answerCodes="cephalic,breech,Abnormal Lie" style="radio" labelCode="presentation"/><br /></td>

                </tr>
                <tr>

                    <td><obs conceptId="8521" style="radio"
                        answerCodes="Health Center,Hospital" labelCode="give_birth"/></td>
                    </tr>
                    <tr>

                        <td><obs conceptId="8522" style="radio"
                            answerConceptIds="1065,1066" answerCodes="Yes,No" labelCode="assessed by doctor"/>(IF Yes Please Fill Out Referral Form/Si oui S'il vous plaît remplir le formulaire de transfert)</td>
                        </tr>
                    </table>
                </section>   
                <section
                headerLabel="Return Visit Date">
                <table class="baseline-aligned">
                    <tr>
                        <td>Return Visit Date: <obs conceptId="5096" id="return date" allowFutureDates="true" /></td>

                    </tr>

                </table>
            </section>
        </section>
        <submit /> 
    </includeIf>
    <includeIf velocityTest="$patient.gender == 'M' ">
        <section headerLabel="Invalid Patient Message">

          <table border="0" width="100%">

            <tr><td>This Form Is Only Filled For Female Patients:</td>

            </tr>

        </table>

    </section>
</includeIf> 
</htmlform>
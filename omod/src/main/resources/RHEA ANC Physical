<htmlform> 
<translations defaultLocale="en">
<code name="Hospital">
        <variant locale="en" value="Hospital"/>
        <variant locale="fr" value="Hôpital"/>
    </code>
<code name="Health Center">
        <variant locale="en" value="Health Center"/>
        <variant locale="fr" value="Centre de Santé"/>
    </code>
<code name="assessed by doctor">
        <variant locale="en" value="Woman needs to be assessed by doctor"/>
        <variant locale="fr" value="Le patient doit consulter un médecin"/>
    </code>
<code name="give_birth">
        <variant locale="en" value="Woman should give birth in"/>
        <variant locale="fr" value="La mère devra accoucher à l' /au"/>
    </code>
<code name="presentation">
        <variant locale="en" value="Presentation (how is the child positioned in the womb)"/>
        <variant locale="fr" value="Présentation - Comment l'enfant est positionné dans l’utérus"/>
    </code>
<code name="breech">
        <variant locale="en" value="Breech Presentation"/>
        <variant locale="fr" value="Présentation en siège"/>
    </code>
<code name="cephalic">
        <variant locale="en" value="Cephalic"/>
        <variant locale="fr" value="Céphalique"/>
    </code>
    <code name="Yes">
        <variant locale="en" value="Yes"/>
        <variant locale="fr" value="Oui"/>
    </code>
<code name="No">
        <variant locale="en" value="No"/>
        <variant locale="fr" value="Non"/>
    </code>
    <code name="Weight">
        <variant locale="en" value="Weight"/>
        <variant locale="fr" value="Poids"/>
    </code>
    <code name="Weight Change Since Last Encounter">
        <variant locale="en" value="Weight Change Since Last Encounter"/>
        <variant locale="fr" value="changement de poids"/>
    </code>
    <code name="Temperature">
        <variant locale="en" value="Temperature"/>
        <variant locale="fr" value="Température"/>
    </code>
   <code name="Systolic">
        <variant locale="en" value="Systolic BP"/>
        <variant locale="fr" value="pression artérielle systolique"/>
    </code>
<code name="Diastolic">
        <variant locale="en" value="Diastolic BP"/>
        <variant locale="fr" value="pression artérielle diastolique"/>
    </code>
<code name="Gestation">
        <variant locale="en" value="Number of weeks pregnant"/>
        <variant locale="fr" value="Nombre de semaine de grossesse"/>
    </code>
<code name="fundal">
        <variant locale="en" value="Length of the uterus (fundal height)"/>
        <variant locale="fr" value="Taille de l'utérus (hauteur utérine)"/>
    </code>
<code name="heartrate">
        <variant locale="en" value="Heart Rate of Fetus"/>
        <variant locale="fr" value="Rythme cardiaque foetal"/>
    </code>
</translations>
<script type="text/javascript">
if(jQuery){
 $j(document).ready(function(){
    if ( $j.browser.msie ) {
        $j(":checkbox").click(function(){
             $j(this).change();
     });
 }
 $j(".enableDisable").each(function(){
     var group = $j(this);
     function disableFn(){
         group.children("#disabled").fadeTo(250,0.33);
         group.children("#disabled").find(":checkbox").attr("checked",false); //uncheck
         group.children("#disabled").find("input[type$='text']").val("");
         group.children("#disabled").find("input").attr("disabled",true);  //disable
     }
 function enableFn(){
     group.children("#disabled").fadeTo(250,1);
     group.children("#disabled").find("input").attr("disabled",false);
 }
 disableFn();
 $j(this).children("#trigger").find(":checkbox:first").change(function(){
     var checked = $j(this).attr("checked");
     if(checked == true){
          enableFn();
     }else{
         disableFn();
     }
 });
});
 
 
 $j(".checkboxGroup").each(function(){
     var group = $j(this);
     var uncheckAll = function(){
         group.find("input[type$='checkbox']").attr("checked",false);
         group.find("input[type$='checkbox']").change();
     }
     var uncheckRadioAndAll = function(){
     group.find("#checkboxAll,#checkboxRadio").find("input[type$='checkbox']").attr("checked",false);
     group.find("#checkboxAll,#checkboxRadio").find("input[type$='checkbox']").change();
 }
 
 
 
 group.find("#checkboxAll").find("input").click(
     
    function(){
         var flip;
         var checked = $j(this).siblings(":checkbox:first").attr("checked");
         if($j(this).attr("name") == $j(this).parents("#checkboxAll:first").find(":checkbox:first").attr("name")){
             checked = $j(this).attr("checked");
             flip = checked;
         }else{
             flip = !checked;
         }
         if($j(this).attr("type") == "text") if(flip == false) flip = !filp; // this is so the user doesn't go to check the checkbox, then uncheck it when they hit the input.
         uncheckAll();
         $j(this).parents("#checkboxAll:first").find(":checkbox").attr("checked",flip);
         $j(this).parents("#checkboxAll:first").find(":checkbox").change();
     }
 );
 
 
 
 group.find("#checkboxRadio").find("input[type$='checkbox']").click(function(){
     uncheckAll();
     $j(this).siblings("input[type$='checkbox']").attr("checked",false);
     $j(this).attr("checked",true);
     $j(this).change();
 });
 
 group.find("#checkboxCheckbox").click(
     function(){
         uncheckRadioAndAll();
     }
 );
 });
 });
}
</script> <script type="text/javascript">
         
         var $ = jQuery.noConflict();
         $(document).ready(function() {
         $('#warning').hide();
$('#warning1').hide();
         
        
         var cdate = $("#encounterDate input").val();
         var dlmp = $("#lmplkp").text();

      
         var crd = new Date(cdate);
         var dd = new Date(dlmp);

         var ddiff = new Date(crd - dd);
         var days = ddiff/1000/60/60/24;
        if(!isNaN(days)){
         var gest = (days/7).toFixed(1);
$("#weeks input").val(Math.round(gest));
         //alert(d);
       }
$("#weight").change(function() {
         var lastWeight = $("#lkp").text();
        // alert(!isNaN(lastWeight));
         //alert(lastWeight == 0)
   if(lastWeight != 0){
       //alert(lastWeight);
             var lastWeightDate = $("#dtlkp").text();
             var currentDate= $("#encounterDate input").val();
             var d = new Date(lastWeightDate);
             var currentWeight= $("#weight input").val();
             var d2 = new Date(currentDate);

             var weightDiff = currentWeight - lastWeight;
                //if(!isNaN(weightDiff)){

                      var diff = new Date(d2 - d);
                           if(diff &gt; 1){
                                 var days = diff/1000/60/60/24;
                                 var month = days/30;
                                 var change= weightDiff/month;
                                 var result = change.toFixed(2)
                                 $("#weightChange input").val(result);
                            }
                //}
      }
          });
	$("#heartRate").change(function() {
		var val = $("#heartRate input").val();

                   if(val == null || val == '')
                      {
                            // $('#fhrOK input:nth(0)').attr('checked',false);
                             //$('#fhrOK input:nth(1)').attr('checked',false);
                             $('#warning').hide();
                      }
                
		   else if(val &lt; 120 || val &gt; 160) {
                        
                        //$('#fhrOK input:nth(1)').attr('checked',true);
                          $('#warning').show();		
		} else {
                       
                        //$('#fhrOK input:nth(0)').attr('checked',true);
                         $('#warning').hide();
		}

               
	});
        $("#fundalHeight,#weeks ").change(function() {
                        var fh = $("#fundalHeight input").val();
                        var wk = $("#weeks input").val();
                        //alert(fh+" ... "+wk);
                      
                         if(fh == null || fh == ''||wk==null||wk=='')
             {
            //$('#fhCheck input:nth(0)').attr('checked',false);
            //$('#fhCheck input:nth(1)').attr('checked',false);
              $('#warning1').hide();
         
             }
    
             else if(fh==wk)
             { 

             //$('#fhCheck input:nth(0)').attr('checked',true);
              $('#warning1').hide();
             }

             else{
                     //$('#fhCheck input:nth(1)').attr('checked',true);
                      $('#warning1').show();	
                   }

    });
});



    </script> 
<macros>
 paperFormId = (Fill this in) 
headerColor =#009d8e
fontOnHeaderColor = white 
</macros>

<style>
table.risks td {
	font-size: 0.9em;
}

.section {
	border: 1px solid$headerColor;
	padding: 2px;
	text-align: left;
	margin-bottom: 1em;
}

.sectionHeader {
	background-color: $headerColor;
	color: $fontOnHeaderColor;
	display: block;
	padding: 2px;
	font-weight: bold;
}

table.baseline-aligned td {
	vertical-align: center;
}
</style>

<span style="float: right">Paper Form ID: $paperFormId</span>
<h2>RHEA ANC Physical (v1.0)</h2>
<includeIf velocityTest="$patient.gender == 'F' ">
<section headerLabel="1. Encounter Details">
	<table class="baseline-aligned">
		<tr>
			<td>Date:</td>
			<td><encounterDate default="today" id="encounterDate" /></td>
		</tr>
		<tr>
			<td>Location:</td>
			<td><encounterLocation default="GlobalProperty:registration.defaultLocationCode"/></td>
		</tr>
		<tr>
			<td>Provider:</td>
			<td><encounterProvider default="currentUser" /></td>
		</tr>
	</table>
</section>

<section headerLabel="2. Physical Exams">
	<table class="baseline-aligned">

		<tr>
			
			<td><obs conceptId="5089" id="weight" labelCode="Weight"/>(KG)</td>
		</tr>
		<tr style="display: none;">
			<td><span id="lkp"><lookup
						expression="fn.latestObs(5089).getValueAsString(en)" /></span></td>
		</tr>
		<tr style="display: none;">
			<td><span id="dtlkp"> <lookup
						expression="fn.latestObs(5089).obsDatetime" />
			</span></td>
		</tr>
		<tr>
			
			<td><obs conceptId="8511" id="weightChange" labelCode="Weight Change Since Last Encounter"/>(Per/Month)</td>

		</tr>
		<!--<tr><td><lookup  expression="patient.personName"/></td></tr>
<tr><td><lookup expression="fn.latestObs(5089)" id="lkp"/></td></tr>-->
		<tr>
			
			<td><obs conceptId="5088" labelCode="Temperature"/>(&#176;C)</td>
		</tr>
		<tr>
			
			<td><obs conceptId="5085" labelCode="Systolic"/>/ <obs
					conceptId="5086" labelCode="Diastolic"/>(mmHg)</td>
		</tr>
		<tr style="display: none;">
			<td><span id="lmplkp"> <lookup
						expression="fn.latestObs(968).getValueDatetime()" />
			</span></td>
		</tr>
		<tr>
			
			<td><obs conceptId="1279" id="weeks" labelCode="Gestation"/></td>
		</tr>

		<tr>
			
			<td><obs conceptId="8145" id="fundalHeight" labelCode="fundal"/>(CM) </td>
		</tr>

		<!--<tr>
			<td>Does fundal height correlate to Gestational age?:</td>
			<td><obs conceptId="8512" id="fhCheck" style="radio"
					answerConceptIds="1065,1066" answerLabels="Yes,No" /></td>
		</tr>-->

		<tr>
			
	<td><obs conceptId="8146" id="heartRate" labelCode="heartrate"/></td>
      
		</tr>
		<!--<tr>
			<td>is fetal heart rate between 120 and 160 BPM?:</td>
			<td><obs conceptId="8513" style="radio" id="fhrOK"
					answerConceptIds="1065,1066" answerLabels="Yes,No" /></td>
		</tr>-->
		



	</table>
	<table class="baseline-aligned">
		<tr>
			
			<td>
				<fieldset>
					<legend>
						<b>ANC complications/Complications de la CPN</b>
					</legend>
					<table class="baseline-aligned checkboxGroup risks">
						<tr>
							<td id="checkboxAll"><obs conceptId="8156"
									answerConceptId="8155" style="checkbox" /></td>
						</tr>

						<tr>
							<td id="checkboxCheckbox"><obs conceptId="8156"
									answerConceptId="3"  style="checkbox" /></td>
							<td id="checkboxCheckbox"><obs conceptId="8156"
									answerConceptId="460"  style="checkbox" /></td>
							<td id="checkboxCheckbox"><obs conceptId="8156"
									answerConceptId="8150"  style="checkbox" /></td>
						</tr>

						<tr>
							<td id="checkboxCheckbox"><obs conceptId="8156"
									answerConceptId="8152" style="checkbox" /></td>
							<td id="checkboxCheckbox"><obs conceptId="8156"
									answerConceptId="8151" style="checkbox" /></td>
							<td id="checkboxCheckbox" style="font-size: 0.9em;"><obs
									conceptId="8156" answerConceptId="8153" style="checkbox" /></td>
						</tr>
						<tr>
							<td id="checkboxCheckbox"><obs conceptId="8156"
									answerConceptId="849" 
									style="checkbox" /></td>
							<td id="checkboxCheckbox"><obs conceptId="8156"
									answerConceptId="8154" style="checkbox"
									/></td>
						</tr>

					</table>


				</fieldset>
			</td>
		</tr>


	</table>
</section>
<section
	headerLabel="3. Nine Month ANC (Filled For Final ANC Visit Only) ">
	<table class="baseline-aligned">
		<!--<tr>
			<td>Presentation (how is the child positioned in the womb):</td>
			<td><obs conceptId="8149" style="radio"
					answerConceptIds="8147,1172,8148"
					answerLabels="cephalic,Breech Delivery,Abnormal Lie" /></td>
		</tr>-->
<tr>
			
			<td><obs conceptId="8149" answerConceptIds="8147,8539,8148"
					answerCodes="cephalic,breech,Abnormal Lie" style="radio" labelCode="presentation"/><br /></td>

		</tr>
		<tr>
			
			<td><obs conceptId="8521" style="radio"
					answerCodes="Health Center,Hospital" labelCode="give_birth"/></td>
		</tr>
		<tr>
			
			<td><obs conceptId="8522" style="radio"
					answerConceptIds="1065,1066" answerCodes="Yes,No" labelCode="assessed by doctor"/>(IF Yes Please Fill Out Referral Form/Si oui S'il vous plaît remplir le formulaire de transfert)</td>
		</tr>
	</table>
</section>
<submit /> 
</includeIf>
<includeIf velocityTest="$patient.gender == 'M' ">
<section headerLabel="Invalid Patient Message">

		<table border="0" width="100%">
           
        <tr><td>This Form Is Only Filled For Female Patients:</td>
				
        </tr>

     </table>

	</section>
</includeIf> 
</htmlform>
